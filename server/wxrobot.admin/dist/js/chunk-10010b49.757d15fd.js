(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10010b49"],{"005d":function(t,e,s){"use strict";var n=s("1cb4"),a=s.n(n);a.a},"0582":function(t,e,s){"use strict";var n=s("610a"),a=s.n(n);a.a},"0bb5":function(t,e,s){"use strict";var n=s("3c77");e["a"]=n["a"]},"1b9b":function(t,e,s){"use strict";var n=s("cea7"),a=s.n(n);a.a},"1cb4":function(t,e,s){},2621:function(t,e){e.f=Object.getOwnPropertySymbols},3476:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"home-container"},[s("MasterPage",{attrs:{title:"用户搜索"}},[s("div",{attrs:{slot:"title-icon"},slot:"title-icon"},[s("Icon",{attrs:{type:"ios-search"}})],1),s("div",{staticClass:"search-content-slot",attrs:{slot:"searchContent"},slot:"searchContent"},[s("Form",{attrs:{model:t.formItem,"label-width":95}},[s("Row",[s("Col",{attrs:{span:"3"}},[s("FormItem",{attrs:{label:"用户名："}},[s("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.userName,callback:function(e){t.$set(t.formItem,"userName",e)},expression:"formItem.userName"}})],1)],1),s("Col",{attrs:{span:"3"}},[s("FormItem",{attrs:{label:"机器人状态："}},[s("Select",{model:{value:t.formItem.serverState,callback:function(e){t.$set(t.formItem,"serverState",e)},expression:"formItem.serverState"}},[s("Option",{attrs:{value:""}},[t._v("全部")]),s("Option",{attrs:{value:"true"}},[t._v("开启")]),s("Option",{attrs:{value:"false"}},[t._v("关闭")])],1)],1)],1),s("Col",{attrs:{span:"3"}},[s("FormItem",{attrs:{label:"手机认证："}},[s("Select",{model:{value:t.formItem.phoneState,callback:function(e){t.$set(t.formItem,"phoneState",e)},expression:"formItem.phoneState"}},[s("Option",{attrs:{value:""}},[t._v("全部")]),s("Option",{attrs:{value:"true"}},[t._v("已认证")]),s("Option",{attrs:{value:"false"}},[t._v("未认证")])],1)],1)],1),s("Col",{attrs:{span:"3"}},[s("FormItem",{attrs:{label:"注销状态："}},[s("Select",{model:{value:t.formItem.destroy,callback:function(e){t.$set(t.formItem,"destroy",e)},expression:"formItem.destroy"}},[s("Option",{attrs:{value:""}},[t._v("全部")]),s("Option",{attrs:{value:"false"}},[t._v("正常")]),s("Option",{attrs:{value:"true"}},[t._v("已注销")])],1)],1)],1)],1)],1)],1),s("div",{attrs:{slot:"search"},slot:"search"},[s("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.getUserList}},[t._v("查询")]),t._v(" \r\n            "),s("Button",{attrs:{type:"primary",icon:"ios-refresh"},on:{click:t.reset}},[t._v("重置")])],1),s("div",{attrs:{slot:"btns"},slot:"btns"},[s("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.addUser}},[t._v("新增会员")])],1),s("div",{attrs:{slot:"paddingContent"},slot:"paddingContent"},[s("Table",{attrs:{columns:t.columns,data:t.userList}})],1),s("div",{attrs:{slot:"pager"},slot:"pager"},[s("Page",{attrs:{total:t.page.totalNum,"show-total":""},on:{"on-change":t.changePage}})],1)]),s("Modal",{attrs:{title:"修改服务时间","class-name":"vertical-center-modal",width:"350"},on:{"on-ok":t.renew},model:{value:t.renewModal.extension,callback:function(e){t.$set(t.renewModal,"extension",e)},expression:"renewModal.extension"}},[t._v("\r\n        服务截止时间：\r\n        "),s("DatePicker",{staticStyle:{width:"216px"},attrs:{type:"date",options:t.renewModal.dateOptions,placeholder:"选择时间",editable:!1},on:{"on-change":t.changeTime}})],1),s("Modal",{attrs:{"class-name":"vertical-center-modal",closable:!1,width:"350"},model:{value:t.p_modal,callback:function(e){t.p_modal=e},expression:"p_modal"}},[s("Table",{attrs:{columns:t.p_columns,data:t.initPermissionsData()}})],1)],1)},a=[],o=(s("f751"),s("0bb5")),r=s("c276"),i=s("64b2"),c={components:{MasterPage:o["a"]},data:function(){var t=this;return{user:{},renewModal:{dateOptions:{disabledDate:function(t){return t&&t.valueOf()<Date.now()-864e5}},extension:!1,serverEnd:""},permissions:{zombieTest:!1,chat:!1,keyword:!1,globalKeyword:!1,timer:!1,globalTimer:!1,acceptFriend:!1,chatRoomFoundTip:!1,memberJoinTip:!1,memberLeftTip:!1,wapSite:!1},page:{totalNum:10,curPage:1,pageSize:10},formItem:{userName:"",serverState:"",phoneState:"",destroy:""},p_modal:!1,p_columns:[{title:"功能描述",key:"name"},{title:"操作",align:"center",render:function(e,s){return e("i-switch",{props:{size:"large",value:s.row.value},on:{"on-change":function(e){t.permissions[""+s.row.target]=e,t.syncPermissions()}}},[e("span",{slot:"open",domProps:{innerHTML:"开启"}}),e("span",{slot:"close",domProps:{innerHTML:"关闭"}})])}}],columns:[{title:"用户名",align:"center",render:function(t,e){return t("span",e.row.userInfo.userName)}},{title:"机器人开关",align:"center",render:function(t,e){return e.row.userInfo.serverState?t("Icon",{props:{type:"md-checkmark",size:"18"}}):t("Icon",{props:{type:"md-close",size:"18"}})}},{title:"手机认证",align:"center",render:function(t,e){return e.row.userInfo.phoneState?t("Icon",{props:{type:"md-checkmark",size:"18"}}):t("Icon",{props:{type:"md-close",size:"18"}})}},{title:"是否注销",align:"center",render:function(t,e){return e.row.userInfo.destroy?t("span","已注销"):t("span","正常")}},{title:"到期时间",align:"center",render:function(t,e){var s=Object(r["b"])(e.row.userInfo.serverEnd);return t("span",s)}},{title:"注册时间",align:"center",render:function(t,e){var s=Object(r["b"])(e.row.userInfo.regTime);return t("span",s)}},{title:"操作",align:"center",width:400,render:function(e,s){var n=[];return s.row.userInfo.destroy?n.push(e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.destroy(s.row,!1)}}},"激活")):(n.push(e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.getPermissionsData(s.row),Object.assign(t.$data.permissions,t.$options.data().permissions),t.p_modal=!0,t.user=s.row}}},"权限设置"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.renewModal.extension=!0,t.user=s.row}}},"续费"),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.resetPwd(s.row)}}},"重置密码")),s.row.userInfo.serverState?n.push(e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.lock(s.row,!1)}}},"关闭机器人")):n.push(e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.lock(s.row,!0)}}},"开启机器人")),n.push(e("Button",{props:{type:"success",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.destroy(s.row,!0)}}},"注销"))),e("div",n)}}],userList:[]}},mounted:function(){this.getUserList()},methods:{syncPermissions:function(){var t=this,e={id:t.user.id,permissions:JSON.stringify(t.permissions)};t.$http.post("/admin/syncPermissions?format=json",e).then(function(e){var s=e.data;s.result?t.$Message.error(s.msg):t.$Message.success("操作成功!")}).catch(function(t){console.log(t)})},getPermissionsData:function(t){var e=this,s=this,n={id:t.id};s.$http.post("/admin/getPermissions?format=json",n).then(function(t){var n=t.data;n.result?s.$Message.error(n.msg):"{}"!=JSON.stringify(n.data)&&(e.permissions=Object.assign({},n.data.info))}).catch(function(t){console.log(t)})},initPermissionsData:function(){var t=[];return t.push({name:"僵尸粉检测",target:"zombieTest",value:this.permissions.zombieTest},{name:"聊天",target:"chat",value:this.permissions.chat},{name:"分群关键词",target:"keyword",value:this.permissions.keyword},{name:"全群关键词",target:"globalKeyword",value:this.permissions.globalKeyword},{name:"分群定时消息",target:"timer",value:this.permissions.timer},{name:"全群定时消息",target:"globalTimer",value:this.permissions.globalTimer},{name:"自动接受好友请求",target:"acceptFriend",value:this.permissions.acceptFriend},{name:"发现新群提示语",target:"chatRoomFoundTip",value:this.permissions.chatRoomFoundTip},{name:"成员加入提示语",target:"memberJoinTip",value:this.permissions.memberJoinTip},{name:"成员退出提示语",target:"memberLeftTip",value:this.permissions.memberLeftTip},{name:"移动端管理",target:"wapSite",value:this.permissions.wapSite}),t},resetPwd:function(t){var e=this;e.$Modal.confirm({title:"重置密码",content:"用户["+t.userInfo.userName+"]的密码将重置为[888888]",okText:"确定",onOk:function(){e.$http.post("/admin/resetPwd?format=json",{id:t.id}).then(function(t){var s=t.data;s.result?e.$Message.error(s.msg):e.$Message.success("操作成功!")}).catch(function(t){console.log(t)})}})},reset:function(){var t=this;this.formItem=Object.assign({},{}),this.$nextTick(function(){t.getUserList()})},renew:function(){var t=this;if(""!=t.renewModal.serverEnd){var e={id:t.user.id,server_end:t.renewModal.serverEnd};this.$http.post("/admin/extension?format=json",e).then(function(e){var s=e.data;s.result?t.$Message.error(s.msg):(t.$Message.success("操作成功!"),t.$nextTick(function(){t.getUserList()}))}).catch(function(t){console.log(t)})}},changeTime:function(t){this.renewModal.serverEnd=t},addUser:function(){Object(i["a"])("user-add")},changePage:function(t){this.page.curPage=t,this.getUserList()},lock:function(t,e){var s=this,n="关闭机器人：",a="<p>关闭机器人则用户微信登录的机器人功能失效，确定?</p>",o="确定关闭";e&&(n="开启用户：",a="<p>开启机器人则用户微信登录的机器人功能生效</p>",o="确定开启"),s.$Modal.confirm({title:n+t.userInfo.userName,content:a,okText:o,onOk:function(){var n={id:t.id,server_state:e};this.$http.post("/admin/lock?format=json",n).then(function(t){var e=t.data;e.result?s.$Message.error(e.msg):(s.$Message.success("操作成功!"),s.$nextTick(function(){s.getUserList()}))}).catch(function(t){console.log(t)})}})},destroy:function(t,e){var s=this,n="注销用户：",a="<p>注销后账号不可再使用，确定?</p>",o="确定注销";e||(n="激活用户：",a="<p>激活后帐号可以正常使用</p>",o="确定激活"),console.log(e),s.$Modal.confirm({title:n+t.userInfo.userName,content:a,okText:o,onOk:function(){var n={id:t.id,destroy:e};this.$http.post("/admin/destroy?format=json",n).then(function(t){var e=t.data;e.result?s.$Message.error(e.msg):(s.$Message.success("操作成功!"),s.$nextTick(function(){s.getUserList()}))}).catch(function(t){console.log(t)})}})},getUserList:function(){var t=this;this.formItem=Object.assign({},this.formItem,this.page),this.$http.post("/admin/list?format=json",this.formItem).then(function(e){var s=e.data;s.result?t.$Message.error(s.msg):(t.userList=s.data.info,t.page.totalNum=s.data.totalnum)}).catch(function(t){console.log(t)})}}},l=c,u=(s("0582"),s("1b9b"),s("2877")),m=Object(u["a"])(l,n,a,!1,null,"41ea8a8e",null);m.options.__file="user-list.vue";e["default"]=m.exports},"3c77":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"master-page-container"},[s("div",{staticClass:"master-page-wrap"},[t.title?s("div",{staticClass:"title-header"},[s("div",{staticClass:"title-content"},[s("div",{staticClass:"title-icon"},[t._t("title-icon")],2),s("p",{staticClass:"title"},[t._v(t._s(t.title))])]),s("div",{staticClass:"title-toolbar"},[t._t("title-toolbar")],2)]):t._e(),t.$slots.searchContent?s("div",{staticClass:"master-page-search-content"},[t._t("searchContent")],2):t._e(),t.$slots.search||t.$slots.btns?s("div",{staticClass:"master-page-content-toolbar"},[s("div",{staticClass:"bar-search"},[t._t("search")],2),s("div",{staticClass:"bar-group"},[t._t("btns")],2)]):t._e(),t.$slots.paddingContent?s("div",{staticClass:"master-page-padding-content"},[t._t("paddingContent")],2):t._e(),t.$slots.content?s("div",{staticClass:"master-page-nopadding-content"},[t._t("content")],2):t._e(),s("div",{staticClass:"page-wrapper"},[t._t("pager")],2)])])},a=[],o={data:function(){return{}},props:{title:{type:String}},mounted:function(){},methods:{}},r=o,i=(s("005d"),s("2877")),c=Object(i["a"])(r,n,a,!1,null,"78a8eb33",null);c.options.__file="master.vue";e["a"]=c.exports},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"610a":function(t,e,s){},7333:function(t,e,s){"use strict";var n=s("0d58"),a=s("2621"),o=s("52a7"),r=s("4bf8"),i=s("626a"),c=Object.assign;t.exports=!c||s("79e5")(function(){var t={},e={},s=Symbol(),n="abcdefghijklmnopqrst";return t[s]=7,n.split("").forEach(function(t){e[t]=t}),7!=c({},t)[s]||Object.keys(c({},e)).join("")!=n})?function(t,e){var s=r(t),c=arguments.length,l=1,u=a.f,m=o.f;while(c>l){var p,d=i(arguments[l++]),f=u?n(d).concat(u(d)):n(d),g=f.length,h=0;while(g>h)m.call(d,p=f[h++])&&(s[p]=d[p])}return s}:c},cea7:function(t,e,s){},f751:function(t,e,s){var n=s("5ca1");n(n.S+n.F,"Object",{assign:s("7333")})}}]);
//# sourceMappingURL=chunk-10010b49.757d15fd.js.map