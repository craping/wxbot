(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca882ac2"],{"32a6":function(t,e,o){var n=o("241e"),a=o("c3a1");o("ce7e")("keys",function(){return function(t){return a(n(t))}})},"355d":function(t,e){e.f={}.propertyIsEnumerable},"386d":function(t,e,o){"use strict";var n=o("cb7c"),a=o("83a1"),i=o("5f1b");o("214f")("search",1,function(t,e,o,c){return[function(o){var n=t(this),a=void 0==o?void 0:o[e];return void 0!==a?a.call(o,n):new RegExp(o)[e](String(n))},function(t){var e=c(o,t,this);if(e.done)return e.value;var r=n(t),s=String(this),l=r.lastIndex;a(l,0)||(r.lastIndex=0);var p=i(r,s);return a(r.lastIndex,l)||(r.lastIndex=l),null===p?-1:p.index}]})},5176:function(t,e,o){t.exports=o("51b6")},"51b6":function(t,e,o){o("a3c3"),t.exports=o("584a").Object.assign},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8aae":function(t,e,o){o("32a6"),t.exports=o("584a").Object.keys},"8d78":function(t,e,o){"use strict";var n=o("9b68"),a=o.n(n);a.a},9306:function(t,e,o){"use strict";var n=o("c3a1"),a=o("9aa9"),i=o("355d"),c=o("241e"),r=o("335c"),s=Object.assign;t.exports=!s||o("294c")(function(){var t={},e={},o=Symbol(),n="abcdefghijklmnopqrst";return t[o]=7,n.split("").forEach(function(t){e[t]=t}),7!=s({},t)[o]||Object.keys(s({},e)).join("")!=n})?function(t,e){var o=c(t),s=arguments.length,l=1,p=a.f,u=i.f;while(s>l){var d,f=r(arguments[l++]),h=p?n(f).concat(p(f)):n(f),m=h.length,v=0;while(m>v)u.call(f,d=h[v++])&&(o[d]=f[d])}return o}:s},9350:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[o("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.goback}},[o("van-icon",{attrs:{slot:"right",name:"add-o",size:"18px"},on:{click:function(e){t.popup=!0}},slot:"right"})],1),o("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),o("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:function(t){}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.keyMap,function(e){return o("van-swipe-cell",{attrs:{"right-width":150}},[o("van-cell-group",[o("van-cell",{attrs:{title:e.key,value:t.getContentTypeDesc(e.type)},on:{click:function(o){return t.showContent(e.key)}}})],1),o("span",{attrs:{slot:"right"},slot:"right"},[o("van-button",{staticStyle:{float:"left",width:"75px"},attrs:{type:"info",square:""},on:{click:function(o){return t.updPopup(e.key)}}},[t._v("\r\n                    修改\r\n                ")]),o("van-button",{staticStyle:{float:"right",width:"75px"},attrs:{type:"danger",square:""},on:{click:function(o){return t.delDialog(e.key)}}},[t._v("\r\n                    删除\r\n                ")])],1)],1)}),1),o("van-popup",{staticStyle:{width:"100%",height:"100%"},attrs:{position:"right",overlay:!1},model:{value:t.popup,callback:function(e){t.popup=e},expression:"popup"}},[o("van-nav-bar",{attrs:{title:t.popupItem.barTitle,"left-text":"返回","left-arrow":""},on:{"click-left":t.closePopup}}),o("van-field",{attrs:{placeholder:"请输入关键字...",clearable:"",disabled:t.popupItem.txtDisabled},model:{value:t.popupItem.keyword,callback:function(e){t.$set(t.popupItem,"keyword",e)},expression:"popupItem.keyword"}}),o("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[o("van-cell-group",[o("van-cell",{attrs:{title:"文本",clickable:""},on:{click:function(e){t.radio="1"}}},[o("van-radio",{attrs:{name:"1"}})],1),o("van-cell",{attrs:{title:"文件",clickable:""},on:{click:function(e){t.radio="2"}}},[o("van-radio",{attrs:{name:"2"}})],1)],1)],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.radio,expression:"radio=='1'"}],staticStyle:{"margin-bottom":"10px","max-height":"600px",overflow:"hidden"}},[o("van-field",{attrs:{type:"textarea",autosize:{maxHeight:200,minHeight:150},clearable:"",placeholder:"请输入内容..."},model:{value:t.popupItem.content,callback:function(e){t.$set(t.popupItem,"content",e)},expression:"popupItem.content"}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:"2"==t.radio,expression:"radio=='2'"}],staticClass:"uploader",attrs:{onclick:"document.getElementById('hiddenFile').click();"}},[o("div",{staticClass:"ivu-icon"},[o("van-icon",{attrs:{name:"upgrade"}}),o("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{multiple:"multiple",type:"file",id:"hiddenFile"},on:{change:t.onRead}})],1),o("p",{staticStyle:{color:"rgb(51, 153, 255)"}},[t._v("点击上传文件")])]),t.popupItem.imageVal&&"2"==t.radio?o("div",{on:{click:t.showImg}},[o("van-icon",{staticClass:"img_icon",attrs:{name:"photo-o",size:"35px"}}),o("span",{staticClass:"custom-text",staticStyle:{display:"inline-block","padding-left":"5px"}},[t._v("\r\n                点击查看图片详情\r\n            ")])],1):"2"==t.radio?o("span",{staticClass:"custom-text file_txt"},[t._v("\r\n            "+t._s(t.popupItem.contentFileName)+"\r\n        ")]):t._e(),o("van-button",{attrs:{size:"large",type:"info"},on:{click:t.addGlobalKeyword}},[t._v("确定提交")])],1),o("van-dialog",{attrs:{"show-cancel-button":"",beforeClose:t.beforeClose},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[o("div",{staticClass:"van-dialog__content"},[o("div",{staticClass:"van-dialog__message"},[t._v("确定删除吗？")])])]),o("footerNav")],1)},a=[],i=(o("386d"),o("7f7f"),o("5176")),c=o.n(i),r=o("a4bb"),s=o.n(r),l=o("dc5d"),p=o("5b59"),u=o("b970"),d=o("c276"),f={components:{topNav:l["a"],footerNav:p["a"],SwipeCell:u["d"],Popup:u["c"],ImagePreview:u["b"],Dialog:u["a"]},data:function(){return{keyword:"",chatRoomKeyMap:{},loading:!1,finished:!0,popup:!1,popupItem:{keyword:"",barTitle:"新增",content:null,contentFile:{},contentFileName:"",imageVal:null,txtDisabled:!1},key:"",radio:"1",isShow:!1,token:""}},computed:{keyMap:function(){var t=this;return Object(d["a"])(s()(this.chatRoomKeyMap).map(function(e){var o=t.chatRoomKeyMap[e];return{key:e,type:o.type,content:o.content}}),{key:this.keyword,content:this.keyword})}},mounted:function(){this.token=Object(d["c"])(window.location.href).token_m,this.loadKeyword()},methods:{goback:function(){this.$router.go(-1)},getContentTypeDesc:function(t){return Object(d["b"])(t)},closePopup:function(){c()(this.$data.popupItem,this.$options.data().popupItem),this.popup=!1},showContent:function(t){var e=this.chatRoomKeyMap[t],o="关键字："+t+"\n回复类型："+this.getContentTypeDesc(e.type)+"\n回复内容："+e.content;Object(u["e"])(o)},loadKeyword:function(){var t=this;s()(this.$config.globalKeyword).length?this.chatRoomKeyMap=this.$config.globalKeyword:(u["e"].loading({forbidClick:!0,duration:0,message:"正在请求..."}),this.$http.post("/keyword/getKeywords?format=json",{token:this.token}).then(function(e){var o=e.data;console.log(o),o.result?u["e"].fail(o.msg):(s()(o.data).length>0&&(t.$config.globalKeyword=t.chatRoomKeyMap=o.data.info.global),setTimeout(function(){Object(u["e"])("加载全域关键字列表成功")},500))}).catch(function(t){console.log(t)}))},delDialog:function(t){this.key=t,this.isShow=!0},updPopup:function(t){var e=this.chatRoomKeyMap[t];this.popupItem.barTitle="修改",this.popupItem.txtDisabled=!0,this.popupItem.keyword=t,this.popupItem.content=e.content,1!=e.type&&(this.radio="2"),2==e.type&&(this.popupItem.imageVal=e.content),"2"==this.radio&&(this.popupItem.contentFileName=e.content),this.popup=!0},oprSwipe:function(t,e){"right"==t||e.close()},beforeClose:function(t,e){var o=this;if("cancel"==t&&e(),"confirm"==t){var n={seq:"global",keyList:[this.key],token:this.token};this.$http.post("keyword/del?format=json",n).then(function(t){var n=t.data;e(),o.$delete(o.chatRoomKeyMap,o.key),o.$config.globalKeyword=o.chatRoomKeyMap,setTimeout(function(){Object(u["e"])(n.msg)},500)}).catch(function(t){console.log(t)})}},addGlobalKeyword:function(){var t=this;if(""!=this.popupItem.keyword.trim()){var e=new FormData;e.append("token",this.token),e.append("seq","global"),e.append("key",this.popupItem.keyword),e.append("content","1"==this.radio?this.popupItem.content:this.popupItem.contentFile),this.$http.post("keyword/set?format=json",e).then(function(e){var o=e.data;o.result?u["e"].fail(o.msg):(t.$set(t.chatRoomKeyMap,t.popupItem.keyword,o.data.info),t.$config.globalKeyword=t.chatRoomKeyMap,u["e"].success(o.msg),t.$nextTick(function(){t.closePopup()}))}).catch(function(t){console.log(t)})}else Object(u["e"])("请输入关键字")},showImg:function(){Object(u["b"])([""+this.popupItem.imageVal])},onRead:function(t){var e=this.$refs.uploader,o=e.files[0];if(void 0!=o){this.popupItem.imageVal=null;var n=Math.floor(o.size/1024);if(n>81920)return Object(u["e"])("请选择80M以内的文件！"),!1;if(this.popupItem.contentFile=o,this.popupItem.content=o.name,this.popupItem.contentFileName=o.name,-1!=o.type.search("image/")){var a=this;if(!t||!window.FileReader)return;var i=new FileReader;i.readAsDataURL(o),i.onloadend=function(){a.popupItem.imageVal=this.result}}}}}},h=f,m=(o("8d78"),o("2877")),v=Object(m["a"])(h,n,a,!1,null,null,null);e["default"]=v.exports},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},"9b68":function(t,e,o){},a3c3:function(t,e,o){var n=o("63b6");n(n.S+n.F,"Object",{assign:o("9306")})},a4bb:function(t,e,o){t.exports=o("8aae")},ce7e:function(t,e,o){var n=o("63b6"),a=o("584a"),i=o("294c");t.exports=function(t,e){var o=(a.Object||{})[t]||Object[t],c={};c[t]=e(o),n(n.S+n.F*i(function(){o(1)}),"Object",c)}},dc5d:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("van-nav-bar",{attrs:{title:t.$route.meta.title,"left-text":"返回","left-arrow":""},on:{"click-left":t.goback}})},a=[],i={name:"topNav",data:function(){return{}},methods:{goback:function(){this.$router.go(-1)}}},c=i,r=o("2877"),s=Object(r["a"])(c,n,a,!1,null,"2fe8c154",null);e["a"]=s.exports}}]);
//# sourceMappingURL=chunk-ca882ac2.0118714f.js.map